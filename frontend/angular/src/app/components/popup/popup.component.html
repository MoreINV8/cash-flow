<div class="popup-bg" appChangeScale [largeScale]="1" [smallScale]="0" [triggerLarge]="isOpen()"
    (click)="closeByBg($event)">
    <div class="popup">
        <ng-container *ngIf="config != null">
            <h2>{{config().title}}</h2>

            <ng-container *ngIf="config().description">
                <p>&emsp;{{config().description ?? ''}}</p>
            </ng-container>
            
            <form [formGroup]="form()" (ngSubmit)="onSubmit()">

                @for (item of config().inputField; track $index) {
                <ng-container *ngIf="item.type != 'option'">
                    <label [for]="`${this.config().title.replace(' ', '')}-${item.title.replace(' ', '')}`">{{item.title}}</label>
                    <input [id]="`${this.config().title.replace(' ', '')}-${item.title.replace(' ', '')}`" [type]="item.type"
                        [placeholder]="item.placeholder ?? ''" [formControlName]="`${this.config().title.replace(' ', '')}-${item.title.replace(' ', '')}`" />
                </ng-container>
                <ng-container *ngIf="item.type === 'option' && item.optionItems">
                    <label for="select">{{item.title}}</label>
                    <select id="select" [formControlName]="`${this.config().title.replace(' ', '')}-${item.title.replace(' ', '')}`">
                        <option value="">-</option>
                        @for (option of item.optionItems; track $index) {
                        <option [value]="option.c_id">{{option.c_name}}</option>
                        }
                    </select>
                </ng-container>
                }


                <div class="clickable">
                    <ng-container *ngIf="config().button?.useCancelButton ?? true">
                        <div class="cancel" (click)="closePopup()">{{config().button?.cancelButtonLabel ?? 'Cancel'}}
                        </div>
                    </ng-container>
                    <ng-container *ngIf="config().button?.useSaveButton ?? true">
                        <div class="save" (click)="onSubmit()">{{config().button?.saveButtonLabel ?? 'Save'}}</div>
                    </ng-container>
                </div>
            </form>
        </ng-container>
    </div>
</div>